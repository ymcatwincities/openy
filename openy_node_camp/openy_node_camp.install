<?php

/**
 * @file
 * Install, update and uninstall functions for the openy_node_camp feature.
 */

/**
 * Add panorama paragraph to body.
 */
function openy_node_camp_update_8001() {
  $config_importer = \Drupal::service('config_import.importer');
  $config_importer->setDirectory(drupal_get_path('module', 'openy_node_camp') . '/config/install');
  $config_importer->importConfigs(
    [
      'field.field.node.camp.field_camp_body',
    ]);
}

/**
 * Add financial aid paragraph to body.
 */
function openy_node_camp_update_8002() {
  $config_importer = \Drupal::service('config_import.importer');
  $config_importer->setDirectory(drupal_get_path('module', 'openy_node_camp') . '/config/install');
  $config_importer->importConfigs(
    [
      'field.field.node.camp.field_camp_body',
    ]);
}

/**
 * Add pathauto pattern.
 */
function openy_node_camp_update_8003() {
  $config_importer = \Drupal::service('config_import.importer');
  $config_importer->setDirectory(drupal_get_path('module', 'openy_node_camp') . '/config/install');
  $config_importer->importConfigs(
    [
      'pathauto.pattern.camp',
    ]);
}

/**
 * Add search_index view mode to Camp.
 */
function openy_node_camp_update_8004() {
  $config_importer = \Drupal::service('config_import.importer');
  $config_importer->setDirectory(drupal_get_path('module', 'openy_node_camp') . '/config/install');
  $config_importer->importConfigs(
    [
      'core.entity_view_display.node.camp.search_index',
    ]);
}

/**
 * Enable microsites menu paragraph and make it available for content type.
 */
function openy_node_camp_update_8005() {
  $modules = ['openy_block_menu', 'openy_prgf_microsites_menu'];
  foreach ($modules as $module) {
    \Drupal::service('module_installer')->install([$module], TRUE);
  }

  $config_importer = \Drupal::service('config_import.importer');
  $config_importer->setDirectory(drupal_get_path('module', 'openy_node_camp') . '/config/install');
  $config_importer->importConfigs(
    [
      'field.field.node.camp.field_branch_body',
      'field.field.node.camp.field_header_content',
    ]
  );
}

/**
 * Enable 'Whats happening at the Y' for camp body field.
 */
function openy_node_camp_update_8006() {
  $config_importer = \Drupal::service('config_import.importer');
  $config_importer->setDirectory(drupal_get_path('module', 'openy_node_camp') . '/config/install');
  $config_importer->importConfigs(
    [
      'field.field.node.camp.field_camp_body',
    ]
  );
}

/**
 * Enable latest blog camp paragraph and and make it available for camp body.
 */
function openy_node_camp_update_8007() {

  $modules = ['openy_prgf_blog_camp'];
  foreach ($modules as $module) {
    \Drupal::service('module_installer')->install([$module], TRUE);
  }
  $config_importer = \Drupal::service('config_import.importer');
  $config_importer->setDirectory(drupal_get_path('module', 'openy_node_camp') . '/config/install');
  $config_importer->importConfigs(
    [
      'field.field.node.camp.field_camp_body',
    ]
  );
}

/**
 * Make field_location_coordinates required.
 */
function openy_node_camp_update_8008() {
  $config_importer = \Drupal::service('config_import.importer');
  $config_importer->setDirectory(drupal_get_path('module', 'openy_node_camp') . '/config/install');
  $config_importer->importConfigs(
    ['field.field.node.camp.field_location_coordinates']
  );
}
